<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>System Flow: Generic WebForms Page</title>
  <!-- Bootstrap 5 CSS (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Font Awesome 6 (CDN) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkfK3jfbQxtQthS7sCjH6VxQ6G3eGq4cJXG1zHndPZjb3T6l8YvZ1IsMg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body { padding-top: 70px; }
    .flow-svg { background:#fff; border:1px solid #e5e7eb; border-radius:12px; box-shadow:0 1px 3px rgba(0,0,0,.06); }
    .node { fill:#ffffff; stroke:#0f172a; stroke-width:1.5; }
    .node:hover { fill:#f8fafc; }
    .diamond { fill:#ffffff; stroke:#0f172a; stroke-width:1.5; }
    .term { fill:#f1f5f9; stroke:#0f172a; stroke-width:1.5; }
    .db { fill:#eef2ff; stroke:#3730a3; stroke-width:1.5; stroke-dasharray:4 3; }
    .edge { stroke:#334155; stroke-width:1.5; fill:none; marker-end:url(#arrow); }
    .edge-accent { stroke:#0369a1; }
    text { font-size:12px; fill:#0f172a; }
    .small { font-size:11px; fill:#475569; }
    .flagship { display:inline-flex; align-items:center; gap:6px; background:#e0f2fe; color:#075985; border:1px solid #7dd3fc; padding:4px 10px; border-radius:999px; font-size:12px; margin-left:8px }
    .lead-sub { color:#525252 }
    .table thead th { white-space:nowrap }
    .code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:.85rem }
    .badge-step { width:26px; height:26px; display:inline-flex; align-items:center; justify-content:center; border-radius:4px; background:#eef2ff; color:#3730a3; font-weight:600; }
  </style>
</head>
<body>
  <!-- Fixed Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" role="navigation" aria-label="Top Navigation">
    <div class="container-fluid">
      <a class="navbar-brand" href="../index.html"><i class="fa-solid fa-diagram-project me-2"></i>Docs Flows</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#topNav" aria-controls="topNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="topNav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="../index.html"><i class="fa-solid fa-house me-1"></i>Home</a></li>
          <li class="nav-item"><a class="nav-link" href="../index.html#toc"><i class="fa-solid fa-list me-1"></i>Table of Contents</a></li>
          <li class="nav-item"><a class="nav-link" href="../docs-html/index.html"><i class="fa-solid fa-code me-1"></i>API Docs</a></li>
          <li class="nav-item"><a class="nav-link" href="../todo.html"><i class="fa-solid fa-database me-1"></i>DB Schema</a></li>
          <li class="nav-item"><a class="nav-link" href="../todo.html"><i class="fa-solid fa-shield-halved me-1"></i>Security</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container">
    <header class="mb-3">
      <h1 class="h2 mb-1">System Flow: Generic WebForms Page <span class="flagship"><i class="fa-solid fa-star"></i> Flagship</span></h1>
      <p class="lead lead-sub mb-0">End-to-end lifecycle for an ASP.NET WebForms request: Global.asax → Master Page → Page → Data → Render.</p>
    </header>

    <!-- Flow Diagram (Inline SVG, clickable nodes) -->
    <section class="mb-4">
      <div class="ratio ratio-21x9">
        <svg class="flow-svg" viewBox="0 0 1050 900" role="img" aria-label="Generic WebForms lifecycle diagram">
          <defs>
            <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
              <path d="M 0 0 L 10 5 L 0 10 z" fill="#334155" />
            </marker>
          </defs>

          <!-- A: Incoming Request -->
          <a href="../docs-html/files/Global.asax.html" target="_blank">
            <g id="A">
              <rect class="node" x="385" y="20" width="280" height="50" rx="6" />
              <text x="525" y="45" text-anchor="middle" dominant-baseline="middle">Incoming Request</text>
              <title>Incoming Request → Global.asax</title>
            </g>
          </a>

          <!-- B: Application_BeginRequest -->
          <a href="../docs-html/files/Global.asax.html#function-Application_BeginRequest" target="_blank">
            <g id="B">
              <rect class="node" x="385" y="100" width="280" height="50" rx="6" />
              <text x="525" y="125" text-anchor="middle" dominant-baseline="middle">Application_BeginRequest</text>
              <title>Global.asax::Application_BeginRequest</title>
            </g>
          </a>

          <!-- C: Authentication/Authorization -->
          <a href="../todo.html" target="_blank">
            <g id="C">
              <rect class="node" x="385" y="180" width="280" height="50" rx="6" />
              <text x="525" y="205" text-anchor="middle" dominant-baseline="middle">Authentication / Authorization</text>
              <title>Authentication / Authorization</title>
            </g>
          </a>

          <!-- D: Master Page? decision -->
          <a href="../docs-html/files/Main.master.html" target="_blank">
            <g id="D">
              <polygon class="diamond" points="525,230 625,260 525,290 425,260" />
              <text x="525" y="260" text-anchor="middle" dominant-baseline="middle">Master Page?</text>
              <title>Uses a Master Page?</title>
            </g>
          </a>

          <!-- E: MasterPage Load and Init (Yes) -->
          <a href="../docs-html/files/Main.master.html#function-Page_Load" target="_blank">
            <g id="E">
              <rect class="node" x="385" y="340" width="280" height="50" rx="6" />
              <text x="525" y="365" text-anchor="middle" dominant-baseline="middle">MasterPage Load and Init</text>
              <title>Main.master::Page_Load</title>
            </g>
          </a>

          <!-- F: Page_Load (.aspx.vb) -->
          <a href="../todo.html" target="_blank">
            <g id="F">
              <rect class="node" x="385" y="420" width="280" height="50" rx="6" />
              <text x="525" y="445" text-anchor="middle" dominant-baseline="middle">Page_Load (.aspx.vb)</text>
              <title>Page code-behind Page_Load</title>
            </g>
          </a>

          <!-- G: Needs Data? decision -->
          <a href="../docs-html/files/App_Code_Services_DataControllerService.vb.html" target="_blank">
            <g id="G">
              <polygon class="diamond" points="525,500 625,530 525,560 425,530" />
              <text x="525" y="530" text-anchor="middle" dominant-baseline="middle">Needs Data?</text>
              <title>Determine if data retrieval is needed</title>
            </g>
          </a>

          <!-- H: Call ASMX/WebMethod/Handler -->
          <a href="../docs-html/files/App_Code_Services_DataControllerService.vb.html#function-GetPage" target="_blank">
            <g id="H">
              <rect class="node" x="385" y="580" width="280" height="50" rx="6" />
              <text x="525" y="605" text-anchor="middle" dominant-baseline="middle">Call ASMX / WebMethod / Handler</text>
              <title>Call service endpoint (e.g., DataControllerService.GetPage)</title>
            </g>
          </a>

          <!-- I: Database -->
          <a href="../todo.html" target="_blank">
            <g id="I">
              <rect class="db" x="385" y="660" width="280" height="50" rx="6" />
              <text x="525" y="685" text-anchor="middle" dominant-baseline="middle">Database</text>
              <title>Database access</title>
            </g>
          </a>

          <!-- J: JSON/XML Response -->
          <a href="../docs-html/files/App_Code_Services_DataControllerService.vb.html#function-Execute" target="_blank">
            <g id="J">
              <rect class="term" x="385" y="740" width="280" height="50" rx="6" />
              <text x="525" y="765" text-anchor="middle" dominant-baseline="middle">JSON or XML Response</text>
              <title>Service returns serialized result</title>
            </g>
          </a>

          <!-- K: Bind to controls & JS render -->
          <a href="../todo.html" target="_blank">
            <g id="K">
              <rect class="node" x="385" y="820" width="280" height="50" rx="6" />
              <text x="525" y="845" text-anchor="middle" dominant-baseline="middle">Bind to controls & JS render</text>
              <title>Data-binding and client-side rendering</title>
            </g>
          </a>

          <!-- L: Render HTML -->
          <a href="../docs-html/files/Main.master.html" target="_blank">
            <g id="L">
              <rect class="node" x="695" y="820" width="260" height="50" rx="6" />
              <text x="825" y="845" text-anchor="middle" dominant-baseline="middle">Render HTML</text>
              <title>Final markup rendered to client</title>
            </g>
          </a>

          <!-- Edges -->
          <path class="edge" d="M525,70 L525,100" />
          <path class="edge" d="M525,150 L525,180" />
          <path class="edge edge-accent" d="M525,230 L525,340" />
          <text class="small" x="535" y="305">Yes</text>

          <!-- No path from Master Page? to Page_Load (.aspx.vb): right then down to F -->
          <path class="edge" d="M625,260 L700,260 L700,420 L665,420" />
          <text class="small" x="635" y="252">No</text>

          <!-- E to F -->
          <path class="edge" d="M525,390 L525,420" />
          <!-- F to G -->
          <path class="edge" d="M525,470 L525,500" />
          <!-- G Yes to H -->
          <path class="edge" d="M525,560 L525,580" />
          <text class="small" x="535" y="575">Yes</text>
          <!-- H to I to J -->
          <path class="edge" d="M525,630 L525,660" />
          <path class="edge" d="M525,710 L525,740" />
          <!-- DB loop back to H (left loop) -->
          <path class="edge" d="M385,685 L320,685 L320,605 L385,605" />
          <text class="small" x="325" y="600">loop</text>
          <!-- J to K -->
          <path class="edge" d="M525,790 L525,820" />
          <!-- K to L -->
          <path class="edge" d="M665,845 L695,845" />
          <!-- G No to L: right then down -->
          <path class="edge" d="M625,530 L760,530 L760,820" />
          <text class="small" x="635" y="522">No</text>
        </svg>
      </div>
      <p class="text-muted mt-2 mb-0">Tip: Click any node in the diagram to open its related documentation in a new tab.</p>
    </section>

    <!-- Detailed Table -->
    <section class="mb-5">
      <h2 class="h4">Detailed Steps</h2>
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th style="width:52px">#</th>
              <th>Step Name</th>
              <th>Code Location</th>
              <th style="min-width:320px">Description</th>
              <th style="min-width:280px">Example</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="badge-step">A</span></td>
              <td><a href="../docs-html/files/Global.asax.html" target="_blank"><i class="fa-solid fa-right-to-bracket me-1"></i>Incoming Request</a></td>
              <td>/Global.asax</td>
              <td>HTTP request arrives at the application entry point.</td>
              <td class="code"><pre class="mb-0"><code>// IIS → ASP.NET → Global.asax
// Routing/module pipeline kicks in</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">B</span></td>
              <td><a href="../docs-html/files/Global.asax.html#function-Application_BeginRequest" target="_blank"><i class="fa-solid fa-gears me-1"></i>Application_BeginRequest</a></td>
              <td>/Global.asax</td>
              <td>Initialize culture, URL checks, set headers, and app-wide context.</td>
              <td class="code"><pre class="mb-0"><code>' VB.NET
Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)
    ' ApplicationServices.VerifyUrl(Request.Url)
End Sub</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">C</span></td>
              <td><a href="../todo.html" target="_blank"><i class="fa-solid fa-user-shield me-1"></i>Authentication / Authorization</a></td>
              <td>/web.config, App_Code/Security/*</td>
              <td>Validate identity and roles; enforce security trimming and access rules.</td>
              <td class="code"><pre class="mb-0"><code>&lt;authorization&gt;
  &lt;deny users="?" /&gt;
&lt;/authorization&gt;</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">D</span></td>
              <td><a href="../docs-html/files/Main.master.html" target="_blank"><i class="fa-solid fa-diagram-project me-1"></i>Master Page?</a></td>
              <td>/Main.master (varies)</td>
              <td>Resolve master page; wire layout, nav, and global scripts.</td>
              <td class="code"><pre class="mb-0"><code>' Page directive
' MasterPageFile="~/Main.master"</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">E</span></td>
              <td><a href="../docs-html/files/Main.master.html#function-Page_Load" target="_blank"><i class="fa-solid fa-window-restore me-1"></i>MasterPage Load and Init</a></td>
              <td>/Main.master.vb</td>
              <td>Run master Init/Load; set menus, resources, global JS config.</td>
              <td class="code"><pre class="mb-0"><code>' VB.NET
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If Not IsPostBack Then
        ' Init universal nav
    End If
End Sub</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">F</span></td>
              <td><a href="../todo.html" target="_blank"><i class="fa-solid fa-file-code me-1"></i>Page_Load (.aspx.vb)</a></td>
              <td>/Pages/*.aspx.vb</td>
              <td>Page-level Init/Load; determine required data and bind controls.</td>
              <td class="code"><pre class="mb-0"><code>' VB.NET
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If Not IsPostBack Then ' fetch data
    End If
End Sub</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">G</span></td>
              <td><a href="../docs-html/files/App_Code_Services_DataControllerService.vb.html" target="_blank"><i class="fa-solid fa-code-branch me-1"></i>Needs Data?</a></td>
              <td>/App_Code/Services/*</td>
              <td>Decision: skip data (static) or call service for dynamic content.</td>
              <td class="code"><pre class="mb-0"><code>// JS (pseudo)
if (needsData) fetch('/Services/DataControllerService.asmx/...')</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">H</span></td>
              <td><a href="../docs-html/files/App_Code_Services_DataControllerService.vb.html#function-GetPage" target="_blank"><i class="fa-solid fa-plug me-1"></i>Call ASMX / WebMethod / Handler</a></td>
              <td>/Services/DataControllerService.asmx, .ashx</td>
              <td>Invoke server endpoint to retrieve view models, lists, or actions.</td>
              <td class="code"><pre class="mb-0"><code>// JS fetch (JSON)
fetch('Services/DataControllerService.asmx/GetPage', { method: 'POST' })</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">I</span></td>
              <td><a href="../todo.html" target="_blank"><i class="fa-solid fa-database me-1"></i>Database</a></td>
              <td>DAL / queries / stored procedures</td>
              <td>Execute query or business rule; return data rows or scalar values.</td>
              <td class="code"><pre class="mb-0"><code>-- SQL (example)
SELECT TOP (50) * FROM dbo.[YourTable]</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">J</span></td>
              <td><a href="../docs-html/files/App_Code_Services_DataControllerService.vb.html#function-Execute" target="_blank"><i class="fa-solid fa-code me-1"></i>JSON or XML Response</a></td>
              <td>/App_Code/Services/DataControllerService.vb</td>
              <td>Serialize results with JavaScriptSerializer and return to client.</td>
              <td class="code"><pre class="mb-0"><code>' VB.NET
Dim s As New System.Web.Script.Serialization.JavaScriptSerializer()
Response.Write(s.Serialize(model))</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">K</span></td>
              <td><a href="../todo.html" target="_blank"><i class="fa-solid fa-wand-magic-sparkles me-1"></i>Bind to controls & JS render</a></td>
              <td>/Pages/*.aspx, /js/*</td>
              <td>Data-bound controls update; optional client rendering and a11y hooks.</td>
              <td class="code"><pre class="mb-0"><code>// JS (sample)
document.getElementById('lblCount').textContent = data.count;</code></pre></td>
            </tr>
            <tr>
              <td><span class="badge-step">L</span></td>
              <td><a href="../docs-html/files/Main.master.html" target="_blank"><i class="fa-solid fa-window-maximize me-1"></i>Render HTML</a></td>
              <td>/Main.master, ASP.NET pipeline</td>
              <td>Server generates HTML; response sent to browser; lifecycle completes.</td>
              <td class="code"><pre class="mb-0"><code>// Output
&lt;html&gt;... final markup ...&lt;/html&gt;</code></pre></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Related Docs -->
    <section class="mb-5">
      <h2 class="h4">Related Docs</h2>
      <ul class="list-unstyled mb-0">
        <li class="mb-1"><a class="link-primary" href="../docs-html/files/Main.master.html" target="_blank"><i class="fa-solid fa-file-lines me-2"></i>Main Master Page</a></li>
        <li class="mb-1"><a class="link-primary" href="../docs-html/files/Pages_MenuApi.aspx.vb.html#function-GetMenuTree" target="_blank"><i class="fa-solid fa-network-wired me-2"></i>Menu API (GetMenuTree)</a></li>
        <li class="mb-1"><a class="link-primary" href="../docs-html/files/App_Code_Services_DataControllerService.vb.html" target="_blank"><i class="fa-solid fa-gears me-2"></i>DataControllerService</a></li>
      </ul>
    </section>

    <!-- Function Links table -->
    <section class="mb-5">
      <h2 class="h4">Function Links</h2>
      <table class="table table-sm table-striped">
        <thead>
          <tr>
            <th style="width:52px">#</th>
            <th>File</th>
            <th>Function</th>
            <th>Link</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>VPG1</td>
            <td>js/dataview-runtime-adapter.js</td>
            <td>mountDataView</td>
            <td><a href="/TestPages/Documents/files/js_dataview-runtime-adapter.js.md">/TestPages/Documents/files/js_dataview-runtime-adapter.js.md</a></td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>

  <!-- Bootstrap JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
