<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>System Flow â€“ Table of Contents Cards</title>
  <style>
    body{font-family:Arial, sans-serif; margin:20px; background:#f8fafc;}
    h1{margin-bottom:8px;}
    .meta{color:#555;margin-bottom:16px}
    a{color:#2563eb}
    .container{overflow:auto}
    svg{max-width:100%; height:auto; background:#fff; border:1px solid #e5e7eb; border-radius:8px}
    .node{fill:#ffffff; stroke:#0f172a; stroke-width:1.5}
    .term{fill:#f1f5f9; stroke:#0f172a; stroke-width:1.5}
    .edge{stroke:#334155; stroke-width:1.5; fill:none; marker-end:url(#arrow)}
    text{font-size:12px; fill:#0f172a}
    .small{font-size:11px; fill:#475569}
  </style>
</head>
<body>
  <h1>System Flow: Table of Contents Cards</h1>
  <div class="meta">ASCX control builds cards; ensure role visibility and layout consistency.</div>
  <div class="container">
    <svg viewBox="0 0 980 600" role="img" aria-label="Table of contents cards flow">
      <defs>
        <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
          <path d="M 0 0 L 10 5 L 0 10 z" fill="#334155" />
        </marker>
      </defs>

      <!-- Nodes -->
      <rect class="node" x="60" y="60" width="320" height="50" rx="6"/>
      <text x="220" y="85" text-anchor="middle" dominant-baseline="middle">Page hosts Controls/TableOfContents.ascx</text>

      <rect class="node" x="60" y="140" width="320" height="50" rx="6"/>
      <text x="220" y="165" text-anchor="middle" dominant-baseline="middle">ASCX init</text>

      <rect class="node" x="60" y="220" width="320" height="50" rx="6"/>
      <text x="220" y="245" text-anchor="middle" dominant-baseline="middle">loadModernNavigation (client JS)</text>

      <rect class="node" x="60" y="300" width="320" height="50" rx="6"/>
      <text x="220" y="325" text-anchor="middle" dominant-baseline="middle">Build cards from quick list</text>

      <rect class="node" x="60" y="380" width="320" height="50" rx="6"/>
      <text x="220" y="405" text-anchor="middle" dominant-baseline="middle">Attach click and hover events</text>

      <rect class="node" x="560" y="300" width="320" height="50" rx="6"/>
      <text x="720" y="325" text-anchor="middle" dominant-baseline="middle">Cards rendered in section</text>

      <polygon class="node" points="720,380 820,410 720,440 620,410" />
      <text x="720" y="410" text-anchor="middle" dominant-baseline="middle">Zero visible cards?</text>

      <rect class="node" x="560" y="480" width="320" height="50" rx="6"/>
      <text x="720" y="505" text-anchor="middle" dominant-baseline="middle">Hide section gracefully</text>

      <rect class="term" x="560" y="540" width="320" height="0" rx="6"/>
      <text x="720" y="455" text-anchor="middle" dominant-baseline="middle">Keep visible</text>

      <!-- Edges -->
      <path class="edge" d="M220,110 L220,140" />
      <path class="edge" d="M220,190 L220,220" />
      <path class="edge" d="M220,270 L220,300" />
      <path class="edge" d="M220,350 L220,380" />
      <path class="edge" d="M380,325 L560,325" />
      <path class="edge" d="M720,350 L720,380" />
      <text class="small" x="730" y="372">Decision</text>
      <path class="edge" d="M820,410 L860,410 L860,505 L880,505" />
      <text class="small" x="830" y="402">Yes</text>
      <path class="edge" d="M720,440 L720,460" />
      <text class="small" x="730" y="452">No</text>
    </svg>

    <div class="flow-links" style="margin-top:12px">
      <strong>Related docs:</strong>
      <ul style="margin:6px 0 0 18px">
        <li><a href="../../docs-html/folders/Controls.html">Controls folder</a></li>
      </ul>
    </div>

    <h3 style="margin-top:16px">Function Links</h3>
    <table style="border-collapse:collapse; width:100%">
      <thead>
        <tr>
          <th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px 8px">Node</th>
          <th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px 8px">File</th>
          <th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px 8px">Function</th>
          <th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px 8px">Link</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="padding:6px 8px">A</td>
          <td style="padding:6px 8px">Controls/TableOfContents.ascx</td>
          <td style="padding:6px 8px">loadModernNavigation (client)</td>
          <td style="padding:6px 8px"><a href="../../docs-html/folders/Controls.html">../../docs-html/folders/Controls.html</a></td>
        </tr>
      </tbody>
    </table>
  </div>
</body>
</html>
