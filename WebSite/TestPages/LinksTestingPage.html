<!DOCTYPE html>
<html>
<head>
    <title>Links Testing Page</title>
    <meta charset="utf-8" />
    
    <!-- ØªØ­Ù…ÙŠÙ„ Ù…Ù„ÙØ§Øª JavaScript Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
    <script src="../js/mainmaster-simple.js"></script>
    <script src="../js/saserp-links-reference.js"></script>
    <script src="../js/navigation-vue-components.js"></script>
    
    <!-- Vue.js CDN (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; direction: rtl; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .section h3 { color: #2c3e50; margin-top: 0; }
        .btn { 
            padding: 8px 15px; margin: 5px; background: #3498db; color: white; 
            border: none; border-radius: 4px; cursor: pointer; 
        }
        .btn:hover { background: #2980b9; }
        .btn.success { background: #27ae60; }
        .btn.warning { background: #f39c12; }
        .btn.danger { background: #e74c3c; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .test-pass { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .test-fail { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .code { background: #f8f9fa; padding: 5px; border-radius: 3px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>ğŸ”— ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±ÙˆØ§Ø¨Ø· - SASERP V37</h1>
    
    <div id="test-status" class="test-result">
        <strong>Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…:</strong> Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù…Ù„ÙØ§Øª...
    </div>

    <div class="section">
        <h3>ğŸ  Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h3>
        <button class="btn" onclick="testLink('mainmaster.pages.home()', 'Home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="btn" onclick="testLink('mainmaster.pages.dashboard()', 'Dashboard')">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
        <button class="btn" onclick="testLink('mainmaster.pages.profile()', 'Profile')">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</button>
        <button class="btn success" onclick="testLink('mainmaster.pages.test.linksGuide()', 'Links Guide')">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· â­</button>
    </div>

    <div class="section">
        <h3>ğŸ’° Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h3>
        <button class="btn" onclick="testLink('mainmaster.pages.financial.main()', 'Financial Main')">Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="btn" onclick="testLink('mainmaster.pages.financial.accounts()', 'Accounts')">Ø®Ø·Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</button>
        <button class="btn" onclick="testLink('mainmaster.pages.financial.gl()', 'GL')">Ø§Ù„Ø£Ø³ØªØ§Ø° Ø§Ù„Ø¹Ø§Ù…</button>
        <button class="btn" onclick="testLink('mainmaster.pages.financial.transactions()', 'Transactions')">Ø§Ù„Ù‚ÙŠÙˆØ¯</button>
        <button class="btn" onclick="testLink('QuickNav.goFinancial()', 'Quick Financial')">ÙˆØµÙˆÙ„ Ø³Ø±ÙŠØ¹ - Ù…Ø§Ù„ÙŠØ©</button>
    </div>

    <div class="section">
        <h3>ğŸ‘¥ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©</h3>
        <button class="btn" onclick="testLink('mainmaster.pages.hr.main()', 'HR Main')">Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©</button>
        <button class="btn" onclick="testLink('mainmaster.pages.hr.employees()', 'Employees')">Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ†</button>
        <button class="btn" onclick="testLink('mainmaster.pages.hr.payroll()', 'Payroll')">ÙƒØ´ÙˆÙ Ø§Ù„Ù…Ø±ØªØ¨Ø§Øª</button>
        <button class="btn" onclick="testLink('QuickNav.goHR()', 'Quick HR')">ÙˆØµÙˆÙ„ Ø³Ø±ÙŠØ¹ - Ù…ÙˆØ§Ø±Ø¯</button>
    </div>

    <div class="section">
        <h3>ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h3>
        <button class="btn" onclick="testLink('mainmaster.pages.stock.main()', 'Stock Main')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
        <button class="btn" onclick="testLink('mainmaster.pages.stock.items()', 'Items')">Ø§Ù„Ø£ØµÙ†Ø§Ù</button>
        <button class="btn" onclick="testLink('mainmaster.pages.stock.transactions()', 'Stock Transactions')">Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
        <button class="btn" onclick="testLink('QuickNav.goStock()', 'Quick Stock')">ÙˆØµÙˆÙ„ Ø³Ø±ÙŠØ¹ - Ù…Ø®Ø²ÙˆÙ†</button>
    </div>

    <div class="section">
        <h3>ğŸ›’ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
        <button class="btn" onclick="testLink('mainmaster.pages.sales.main()', 'Sales Main')">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
        <button class="btn" onclick="testLink('mainmaster.pages.sales.invoices()', 'Sales Invoices')">ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
        <button class="btn" onclick="testLink('mainmaster.pages.sales.pos()', 'POS')">Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹</button>
        <button class="btn" onclick="testLink('QuickNav.goPOS()', 'Quick POS')">ÙˆØµÙˆÙ„ Ø³Ø±ÙŠØ¹ - POS</button>
    </div>

    <div class="section">
        <h3>âš¡ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹</h3>
        <button class="btn warning" onclick="testLink('mainmaster.pages.quick.newInvoice()', 'New Invoice')">ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        <button class="btn warning" onclick="testLink('mainmaster.pages.quick.newCustomer()', 'New Customer')">Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
        <button class="btn warning" onclick="testLink('QuickNav.newInvoice()', 'Quick New Invoice')">Ø³Ø±ÙŠØ¹ - ÙØ§ØªÙˆØ±Ø©</button>
        <button class="btn warning" onclick="testLink('QuickNav.newCustomer()', 'Quick New Customer')">Ø³Ø±ÙŠØ¹ - Ø¹Ù…ÙŠÙ„</button>
    </div>

    <div class="section">
        <h3>ğŸ§ª ØµÙØ­Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
        <button class="btn success" onclick="testLink('mainmaster.pages.test.main()', 'Test Main')">ØµÙØ­Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
        <button class="btn success" onclick="testLink('mainmaster.pages.test.navigation()', 'Test Navigation')">Ù…Ø«Ø§Ù„ Ø§Ù„ØªÙ†Ù‚Ù„</button>
        <button class="btn success" onclick="testLink('mainmaster.pages.test.dashboard()', 'Test Dashboard')">Ù…Ø«Ø§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
        <button class="btn success" onclick="testLink('QuickNav.testNavigation()', 'Quick Test Nav')">Ø³Ø±ÙŠØ¹ - ØªØ¬Ø±Ø¨Ø© ØªÙ†Ù‚Ù„</button>
    </div>

    <div class="section">
        <h3>ğŸ”§ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ</h3>
        <button class="btn danger" onclick="checkSystemStatus()">ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</button>
        <button class="btn danger" onclick="reloadSystemFiles()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª</button>
        <button class="btn danger" onclick="testAllLinks()">Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</button>
        <button class="btn danger" onclick="showSystemInfo()">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</button>
        <button class="btn danger" onclick="resetSystem()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
    </div>

    <div id="test-results" style="margin-top: 20px;"></div>

    <script>
        let testResults = [];
        
        function testLink(command, description) {
            try {
                console.log(`Testing: ${command}`);
                
                // ØªØ¬Ø±Ø¨Ø© ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù…Ø±
                if (command.includes('mainmaster.pages')) {
                    if (typeof mainmaster !== 'undefined' && mainmaster.pages) {
                        eval(command);
                        addTestResult(`âœ… Ù†Ø¬Ø­: ${description} - ${command}`, 'pass');
                    } else {
                        addTestResult(`âš ï¸ ØºÙŠØ± Ù…ØªØ§Ø­: ${description} - mainmaster ØºÙŠØ± Ù…Ø­Ù…Ù„`, 'fail');
                    }
                } else if (command.includes('QuickNav')) {
                    if (typeof QuickNav !== 'undefined') {
                        eval(command);
                        addTestResult(`âœ… Ù†Ø¬Ø­: ${description} - ${command}`, 'pass');
                    } else {
                        addTestResult(`âš ï¸ ØºÙŠØ± Ù…ØªØ§Ø­: ${description} - QuickNav ØºÙŠØ± Ù…Ø­Ù…Ù„`, 'fail');
                    }
                } else {
                    eval(command);
                    addTestResult(`âœ… Ù†Ø¬Ø­: ${description} - ${command}`, 'pass');
                }
            } catch (error) {
                addTestResult(`âŒ ÙØ´Ù„: ${description} - ${error.message}`, 'fail');
                console.error(`Error testing ${command}:`, error);
            }
        }
        
        function addTestResult(message, type) {
            const resultsDiv = document.getElementById('test-results');
            const resultElement = document.createElement('div');
            resultElement.className = `test-result test-${type}`;
            resultElement.innerHTML = message;
            resultsDiv.appendChild(resultElement);
            
            testResults.push({ message, type, timestamp: new Date() });
            
            // Ø­ÙØ¸ ÙÙŠ localStorage
            localStorage.setItem('saserp_test_results', JSON.stringify(testResults));
        }
        
        function reloadSystemFiles() {
            addTestResult('ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…...', 'pass');
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
            const existingScripts = document.querySelectorAll('script[src*="mainmaster"], script[src*="saserp"], script[src*="navigation"]');
            existingScripts.forEach(script => script.remove());
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ù…Ù† Ø¬Ø¯ÙŠØ¯
            const scripts = [
                '../js/mainmaster-vue-framework.js',
                '../js/saserp-links-reference.js',
                '../js/navigation-vue-components.js'
            ];
            
            let loadedCount = 0;
            scripts.forEach((src, index) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    loadedCount++;
                    addTestResult(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„: ${src}`, 'pass');
                    
                    if (loadedCount === scripts.length) {
                        setTimeout(() => {
                            addTestResult('ğŸ‰ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'pass');
                            checkSystemStatus();
                        }, 500);
                    }
                };
                script.onerror = () => {
                    addTestResult(`âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„: ${src}`, 'fail');
                };
                document.head.appendChild(script);
            });
        }
        
        function checkSystemStatus() {
            const status = document.getElementById('test-status');
            let statusMessage = '<strong>Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…:</strong><br>';
            let allOk = true;
            
            // ÙØ­Øµ Ù…Ù„ÙØ§Øª JavaScript
            if (typeof mainmaster !== 'undefined') {
                statusMessage += 'âœ… mainmaster-vue-framework.js Ù…Ø­Ù…Ù„<br>';
                
                // ÙØ­Øµ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø±Ù…ÙŠ
                if (mainmaster.pages) {
                    statusMessage += 'âœ… Ù†Ø¸Ø§Ù… mainmaster.pages Ù…ØªØ§Ø­<br>';
                } else {
                    statusMessage += 'âš ï¸ Ù†Ø¸Ø§Ù… mainmaster.pages ØºÙŠØ± Ù…ÙƒØªÙ…Ù„<br>';
                }
            } else {
                statusMessage += 'âŒ mainmaster-vue-framework.js ØºÙŠØ± Ù…Ø­Ù…Ù„<br>';
                allOk = false;
            }
            
            if (typeof QuickNav !== 'undefined') {
                statusMessage += 'âœ… saserp-links-reference.js Ù…Ø­Ù…Ù„<br>';
                statusMessage += `âœ… ${Object.keys(QuickNav).length} Ø¯Ø§Ù„Ø© Ø³Ø±ÙŠØ¹Ø© Ù…ØªØ§Ø­Ø©<br>`;
            } else {
                statusMessage += 'âŒ saserp-links-reference.js ØºÙŠØ± Ù…Ø­Ù…Ù„<br>';
                allOk = false;
            }
            
            if (typeof SASERP_LINKS !== 'undefined') {
                statusMessage += 'âœ… SASERP_LINKS Ù…ØªØ§Ø­<br>';
                statusMessage += `âœ… ${Object.keys(SASERP_LINKS).length} ÙØ¦Ø© Ø±ÙˆØ§Ø¨Ø· Ù…ØªØ§Ø­Ø©<br>`;
            } else {
                statusMessage += 'âŒ SASERP_LINKS ØºÙŠØ± Ù…ØªØ§Ø­<br>';
                allOk = false;
            }
            
            // ÙØ­Øµ Vue.js
            if (typeof Vue !== 'undefined') {
                statusMessage += 'âœ… Vue.js Ù…Ø­Ù…Ù„<br>';
            } else {
                statusMessage += 'âš ï¸ Vue.js ØºÙŠØ± Ù…Ø­Ù…Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)<br>';
            }
            
            // ÙØ­Øµ Navigation
            if (typeof mainmaster !== 'undefined' && mainmaster.navigation) {
                statusMessage += 'âœ… Ù†Ø¸Ø§Ù… Navigation Ù…ØªØ§Ø­<br>';
            } else {
                statusMessage += 'âš ï¸ Ù†Ø¸Ø§Ù… Navigation ØºÙŠØ± Ù…Ø­Ù…Ù„<br>';
            }
            
            // ØªÙ‚ÙŠÙŠÙ… Ø¹Ø§Ù…
            if (allOk) {
                statusMessage += '<br><strong style="color: green;">ğŸ‰ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ!</strong>';
                status.className = 'test-result test-pass';
            } else {
                statusMessage += '<br><strong style="color: red;">âš ï¸ ÙŠÙˆØ¬Ø¯ Ù…Ø´Ø§ÙƒÙ„ ØªØ­ØªØ§Ø¬ Ø¥ØµÙ„Ø§Ø­</strong>';
                status.className = 'test-result test-fail';
            }
            
            status.innerHTML = statusMessage;
        }
        
        function testAllLinks() {
            const commands = [
                'mainmaster.pages.home()',
                'mainmaster.pages.dashboard()',
                'mainmaster.pages.test.linksGuide()',
                'mainmaster.pages.financial.accounts()',
                'mainmaster.pages.hr.employees()',
                'mainmaster.pages.stock.items()',
                'QuickNav.goFinancial()',
                'QuickNav.newInvoice()'
            ];
            
            commands.forEach((cmd, index) => {
                setTimeout(() => {
                    testLink(cmd, `Test ${index + 1}`);
                }, index * 500);
            });
        }
        
        function showSystemInfo() {
            const info = {
                userAgent: navigator.userAgent,
                location: window.location.href,
                timestamp: new Date().toISOString(),
                testResults: testResults.length,
                localStorage: localStorage.getItem('saserp_test_results') ? 'Ù…ØªØ§Ø­' : 'ØºÙŠØ± Ù…ØªØ§Ø­'
            };
            
            addTestResult(`â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…: ${JSON.stringify(info, null, 2)}`, 'pass');
        }
        
        function resetSystem() {
            testResults = [];
            localStorage.removeItem('saserp_test_results');
            document.getElementById('test-results').innerHTML = '';
            addTestResult('ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù…', 'pass');
            checkSystemStatus();
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠ
        window.addEventListener('load', function() {
            checkSystemStatus();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            const savedResults = localStorage.getItem('saserp_test_results');
            if (savedResults) {
                try {
                    testResults = JSON.parse(savedResults);
                    addTestResult(`ğŸ“ ØªÙ… ØªØ­Ù…ÙŠÙ„ ${testResults.length} Ù†ØªÙŠØ¬Ø© Ù…Ø­ÙÙˆØ¸Ø©`, 'pass');
                } catch (e) {
                    console.error('Error loading saved results:', e);
                }
            }
        });
        
        // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
        setInterval(checkSystemStatus, 30000);
    </script>
</body>
</html>
